@using PW.Prism.ViewModels.OBK
@model OBKContractAddition

<script src="~/Scripts/js/custom/subform-comment.js"></script>
<script src="~/Scripts/js/custom/atach-comment.js"></script>

@foreach (var comment in (List<PW.Ncels.Database.DataModel.OBK_ContractCom>)ViewBag.Comments)
{
    <p class="rating" idcontrol="@comment.ControlId" iserror=@true></p>
}

<div id="@("contractAdditionLoader" + ViewBag.UiId)"></div>

@(Html.Kendo().Splitter()
                        .HtmlAttributes(new { @class = "pwSplitter k-block" })
            .Name(("splitter" + (string)ViewBag.UiId))
            .Panes(panes =>
            {
            panes.Add()
                .Size("300px")
                .Collapsible(true)
                .MaxSize("500px")
                .MinSize("300px")
                .Content(
                @<div class="pwPanelBar">
                    @(Html.Kendo().PanelBar().HtmlAttributes(new { @class = "pwPanelBar" })
                               .Name("panelbar" + (string)ViewBag.UiId)
                               .ExpandMode(PanelBarExpandMode.Multiple)
                               .ExpandAll(true)
                               .HtmlAttributes(new { style = "width:auto;", data_bind = "events: { select: contractCardTabSelect }" })
                               .Items(panelbar =>
                               {
                                   panelbar.Add().Expanded(true);
                                   panelbar.Add().Text("Структура доп. соглашения")
                                                                   .Items(projects =>
                                                                   {
                                                                       projects.Add().Text("Карточка доп. соглашения").HtmlAttributes(new { TabId = "contractDataTab1" + ViewBag.UiId }).Selected(true);
                                                                       projects.Add().Text("Вложения").HtmlAttributes(new { TabId = "contractDataTab2" + ViewBag.UiId });
                                                                       projects.Add().Text("История согласования").HtmlAttributes(new { TabId = "contractDataTab3" + ViewBag.UiId });
                                                                   });

                               })
                    )
                </div>
                );

                panes.Add().Scrollable(false).Size("100%").Content(
                    @<div id="@("contractDataTabs" + ViewBag.UiId)" class="pwPageScrollable" style="background-color: white; margin-top: 10px">
                        <div id="@("contractDataTab1" + ViewBag.UiId)" class="row">
                            <div class="ibox-content">
                                <div class="row">
                                    @(Html.Kendo().ToolBar().Name("contractToolBar" + (string)ViewBag.UiId).Items(items =>
                                {
                                    if (ViewBag.ShowReturnToApplicantBtn)
                                    {
                                        items.Add().Type(CommandType.Button).Template(string.Format("<a id='returnToApplicantBtn{0}' class='k-button' data-bind='click: returnToApplicant'>Вернуть на доработку</a>", (string)ViewBag.UiId));
                                    }
                                    if (ViewBag.ShowDoApprovementAsLawyerBtn)
                                    {
                                        items.Add().Type(CommandType.Button).Template(string.Format("<a id='doApprovementAsLawyerBtn{0}' class='k-button' data-bind='click: doApprovementAsLawyer'>Согласовать</a>", (string)ViewBag.UiId));
                                    }
                                    if (ViewBag.ShowDoApprovementAsManagerBtn)
                                    {
                                        items.Add().Type(CommandType.Button).Template(string.Format("<a id='doApprovementAsManagerBtn{0}' class='k-button' data-bind='click: doApprovementAsManager'><span class='glyphicon glyphicon-ok-circle'></span> Согласовать</a>", (string)ViewBag.UiId));
                                    }
                                    if (ViewBag.ShowRefuseApprovementBtn)
                                    {
                                        items.Add().Type(CommandType.Button).Template(string.Format("<a id='refuseApprovementBtn{0}' class='k-button' data-bind='click: refuseApprovement'><span class='glyphicon glyphicon-ban-circle'></span> Отказать в согласовании</a>", (string)ViewBag.UiId));
                                    }
                                    if (ViewBag.ShowShowRefuseReasonBtn)
                                    {
                                        items.Add().Type(CommandType.Button).Template(string.Format("<a id='showRefuseReasonBtn{0}' class='k-button' data-bind='click: showRefuseReason'>Отобразить основание отказа</a>", (string)ViewBag.UiId));
                                    }
                                    if (ViewBag.ShowRegisterBtn)
                                    {
                                        items.Add().Type(CommandType.Button).Template(string.Format("<a id='registerBtn{0}' class='k-button' data-bind='click: register'><span class='glyphicon glyphicon-ok-circle'></span> Зарегистрировать</a>", (string)ViewBag.UiId));
                                    }
                                    if (ViewBag.ShowAttachContractBtn)
                                    {
                                        var disabled = "";
                                        if (Model.Contract.Number == null || Model.Contract.Number == PW.Ncels.Database.Constants.CodeConstManager.OBK_CONTRACT_NO_NUMBER)
                                        {
                                            disabled = "disabled";
                                        }
                                        items.Add().Type(CommandType.Button).Template(string.Format("<a id='attachContractBtn{0}' class='k-button {1}' data-bind='click: attachContract'><span class='glyphicon glyphicon-ok-circle'></span> Прикрепить доп. соглашение</a>", (string)ViewBag.UiId, disabled));
                                    }
                                    if (ViewBag.ShowSignContractBtn)
                                    {
                                        items.Add().Type(CommandType.Button).Template(string.Format("<a id='signContractBtn{0}' class='k-button' data-bind='click: signContract'><span class='glyphicon glyphicon-check'></span> Подписать</a>", (string)ViewBag.UiId));
                                    }
                                    items.Add().Type(CommandType.Button).Template(string.Format("<a id='printFormBtn{0}' class='k-button' data-bind='click: printForm'><span class='glyphicon glyphicon-print'></span> Печать формы договора</a>", (string)ViewBag.UiId));
                                }))
                                </div>
                                <br />
                                <div class="row">
                                    <input type="hidden" id="modelId" value="@Model.ContractAddition.Id.ToString()" />
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label>К договору</label>
                                            @Html.DropDownList("ContractId", (IEnumerable<SelectListItem>)(ViewBag.Contracts),
                                                                    String.Empty,
                                                                    new
                                                                    {
                                                                        @class = "form-control edit-control main-control",
                                                                        @disabled = "disabled"
                                                                    })
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label>Выберите дополнительное соглашение</label>
                                            @Html.DropDownList("ContractAdditionTypeId", (IEnumerable<SelectListItem>)(ViewBag.ContractAdditionTypes),
                                                                    String.Empty,
                                                                    new
                                                                    {
                                                                        @class = "form-control edit-control main-control",
                                                                        @disabled = "disabled"
                                                                    })
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="tabs-container">
                                            <ul class="nav nav-tabs">
                                                <li class="active"><a data-toggle="tab" href="#tab-1">Общие сведения</a></li>
                                            </ul>
                                            <div class="tab-content">
                                                <div id="tab-1" class="tab-pane active">
                                                    <div class="panel-body">
                                                        <div class="row">
                                                            <div class="col-lg-6 b-r">
                                                                <div class="form-group">
                                                                    <label>Тип договора *</label>
                                                                    @Html.DropDownList("ContractType", (IEnumerable<SelectListItem>)(ViewBag.ContractTypes),
                                                                    String.Empty,
                                                                    new
                                                                    {
                                                                        @class = "form-control edit-control main-control",
                                                                        @disabled = "disabled"
                                                                    })
                                                                </div>
                                                                <div class="form-group">
                                                                    @{
                                                                        var @checkedResident = ViewBag.declarant.IsResident ? "checked" : "";
                                                                        var @checkedNonResident = !ViewBag.declarant.IsResident ? "checked" : "";
                                                                    }
                                                                    <div class="radio-inline">
                                                                        <label><input type="radio" name="declarantisresident" @checkedResident>Резидент РК</label>
                                                                    </div>
                                                                    <div class="radio-inline">
                                                                        <label><input type="radio" name="declarantisresident" @checkedNonResident>Нерезидент РК</label>
                                                                    </div>
                                                                    <div class="radio-inline">
                                                                    </div>
                                                                </div>
                                                                @if (ViewBag.declarant.IsResident)
                                                                {
                                                                    <div class="form-group">
                                                                        <label>ИИН/БИН *</label>
                                                                        <input maxlength="12" id="bin" class="form-control edit-control" type="text" name="bin" disabled value="@ViewBag.declarant.Bin">
                                                                    </div>
                                                                }
                                                                @if (!ViewBag.declarant.IsResident)
                                                                {
                                                                    <div class="form-group">
                                                                        <label>Страна</label>
                                                                            @Html.DropDownList(
                                                                   "CountryNonResident", (IEnumerable<SelectListItem>)(ViewBag.Countries), string.Empty, new { @class = "form-control edit-control main-control", disabled = "disabled" }
                                                                   )
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label>Наименование на русском языке *</label>
                                                                        @Html.DropDownList(
                                                                       "NameNonResident", (IEnumerable<SelectListItem>)(ViewBag.NamesNonResidents), string.Empty, new { @class = "form-control edit-control main-control", disabled = "disabled" }
                                                                       )
                                                                    </div>
                                                                }
                                                            </div>
                                                            <div class="col-lg-6 b-l">
                                                                <div class="form-group">
                                                                    <label>Экспертная организация *</label>
                                                                    @Html.DropDownList("ExpertOrganization", (IEnumerable<SelectListItem>)(ViewBag.ExpertOrganizations),
                                                                    String.Empty,
                                                                    new
                                                                    {
                                                                        @class = "form-control edit-control main-control",
                                                                        @disabled = "disabled"
                                                                    })
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>Подписывающее лицо *</label>
                                                                    @Html.DropDownList("Signer", (IEnumerable<SelectListItem>)(ViewBag.Signers),
                                                                    String.Empty,
                                                                    new
                                                                    {
                                                                        @class = "form-control edit-control main-control",
                                                                        @disabled = "disabled"
                                                                    })
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-lg-6 b-r">
                                                                <div class="form-group">
                                                                    <h4>&nbsp;</h4>
                                                                    <input type="hidden" />
                                                                    <label>Организационная форма</label>
                                                                    @Html.DropDownList("OrganizationForm", (IEnumerable<SelectListItem>)(ViewBag.OrganizationForms),
                                                                   String.Empty,
                                                                    new
                                                                    {
                                                                        @class = "form-control edit-control main-control",
                                                                        @disabled = "disabled"
                                                                    })
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>Наименование на государственном языке *</label>
                                                                    <input id="declarantNameKz" placeholder="Введите значение" class="form-control edit-control" type="text" name="declarantNameKz" disabled value="@ViewBag.declarant.NameKz">
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>Наименование на русском языке *</label>
                                                                    <input id="declarantNameRu" placeholder="Введите значение" class="form-control edit-control" type="text" name="declarantNameRu" disabled value="@ViewBag.declarant.NameRu">
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>Наименование на английском языке</label>
                                                                    <input id="declarantNameEn" placeholder="Введите значение" class="form-control edit-control" type="text" name="declarantNameEn" disabled value="@ViewBag.declarant.NameEn">
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>Страна</label>
                                                                        @Html.DropDownList(
                                                                   "Country", (IEnumerable<SelectListItem>)(ViewBag.Countries), string.Empty, new { @class = "form-control edit-control main-control", disabled = "disabled" }
                                                                   )
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-6 b-l">
                                                                <div class="form-group">
                                                                    <h4>Адрес</h4>
                                                                    <label>Юридический адрес * </label>
                                                                    <div class="input-group">
                                                                        <input id="AddressLegalRu" placeholder="Введите значение" class="form-control edit-control" type="text" name="AddressLegalRu" disabled value="@Model.Contract.AddressLegalRu">
                                                                        <span class="input-group-addon">
                                                                            <a class="obkcontractdialog" href="#">
                                                                                <i class="glyphicon glyphicon-info-sign"></i>
                                                                            </a>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>Юридический адрес на казахском * </label>
                                                                    <div class="input-group">
                                                                        <input id="AddressLegalKz" placeholder="Введите значение" class="form-control edit-control" type="text" name="AddressLegalKz" disabled value="@Model.Contract.AddressLegalKz">
                                                                        <span class="input-group-addon">
                                                                            <a class="obkcontractdialog" href="#">
                                                                                <i class="glyphicon glyphicon-info-sign"></i>
                                                                            </a>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>Фактический адрес * </label>
                                                                    <div class="input-group">
                                                                        <input id="AddressFact" placeholder="Введите значение" class="form-control edit-control" type="text" name="AddressFact" disabled value="@Model.Contract.AddressFact">
                                                                        <span class="input-group-addon">
                                                                            <a class="obkcontractdialog" href="#">
                                                                                <i class="glyphicon glyphicon-info-sign"></i>
                                                                            </a>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>Номер телефона * </label>
                                                                    <div class="input-group">
                                                                        <input id="Phone" placeholder="Введите значение" class="form-control edit-control" type="text" name="Phone" disabled value="@Model.Contract.Phone">
                                                                        <span class="input-group-addon">
                                                                            <a class="obkcontractdialog" href="#">
                                                                                <i class="glyphicon glyphicon-info-sign"></i>
                                                                            </a>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label>Адрес электронной почты * </label>
                                                                    <div class="input-group">
                                                                        <input id="Email" placeholder="example@mail.ru" class="form-control edit-control" type="text" name="Email" disabled value="@Model.Contract.Email">
                                                                        <span class="input-group-addon">
                                                                            <a class="obkcontractdialog" href="#">
                                                                                <i class="glyphicon glyphicon-info-sign"></i>
                                                                            </a>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-lg-12">
                                                                <h4>Подписывающее лицо</h4>
                                                            </div>
                                                            <div>
                                                                <div class="row">
                                                                    <div class="col-lg-3">
                                                                        <div class="form-group">
                                                                            <label>Фамилия *</label>
                                                                            <div class="input-group">
                                                                                <input id="BossLastName" placeholder="Введите значение" class="form-control edit-control" type="text" disabled value="@Model.Contract.BossLastName">
                                                                                <span class="input-group-addon">
                                                                                    <a class="obkcontractdialog" href="#">
                                                                                        <i class="glyphicon glyphicon-info-sign"></i>
                                                                                    </a>
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-lg-3">
                                                                        <div class="form-group">
                                                                            <label>Имя *</label>
                                                                            <div class="input-group">
                                                                                <input id="BossFirstName" placeholder="Введите значение" class="form-control edit-control" type="text" disabled value="@Model.Contract.BossFirstName">
                                                                                <span class="input-group-addon">
                                                                                    <a class="obkcontractdialog" href="#">
                                                                                        <i class="glyphicon glyphicon-info-sign"></i>
                                                                                    </a>
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-lg-3">
                                                                        <div class="form-group">
                                                                            <label>Отчество</label>
                                                                            <div class="input-group">
                                                                                <input id="BossMiddleName" placeholder="Введите значение" class="form-control edit-control" disabled value="@Model.Contract.BossMiddleName">
                                                                                <span class="input-group-addon">
                                                                                    <a class="obkcontractdialog" href="#">
                                                                                        <i class="glyphicon glyphicon-info-sign"></i>
                                                                                    </a>
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row">
                                                                    <div class="col-lg-3">
                                                                        <div class="form-group">
                                                                            <label>Должность на русском языке *</label>
                                                                            <div class="input-group">
                                                                                <input id="BossPosition" placeholder="Введите значение" class="form-control edit-control" type="text" disabled value="@Model.Contract.BossPosition">
                                                                                <span class="input-group-addon">
                                                                                    <a class="obkcontractdialog" href="#">
                                                                                        <i class="glyphicon glyphicon-info-sign"></i>
                                                                                    </a>
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-lg-3">
                                                                        <div class="form-group">
                                                                            <label>Должность на казахском языке *</label>
                                                                            <div class="input-group">
                                                                                <input id="BossPositionKz" placeholder="Введите значение" class="form-control edit-control" type="text" disabled value="@Model.Contract.BossPositionKz">
                                                                                <span class="input-group-addon">
                                                                                    <a class="obkcontractdialog" href="#">
                                                                                        <i class="glyphicon glyphicon-info-sign"></i>
                                                                                    </a>
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-12">
                                                                <h4>Действующее на основании</h4>
                                                            </div>
                                                            <div>
                                                                <div class="row">
                                                                    <div class="col-lg-6">
                                                                        <div class="form-group">
                                                                            <label>Вид документа *</label>
                                                                            <div class="input-group">
                                                                                @Html.DropDownList("BossDocType", (IEnumerable<SelectListItem>)ViewBag.DocTypes, string.Empty,
                                                                           new
                                                                           {
                                                                               @class = "form-control edit-control main-control",
                                                                               @disabled = "disabled"
                                                                           })
                                                                                <span id="BossDocType" class="edit-control" style="display: none"></span>
                                                                                <span class="input-group-addon">
                                                                                    <a class="obkcontractdialog" href="#">
                                                                                        <i class="glyphicon glyphicon-info-sign"></i>
                                                                                    </a>
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-lg-3">
                                                                        <div class="form-group">
                                                                            <div class="checkbox">
                                                                                @{
                                                                                    var bossDocUnlimitedChecked = Model.Contract.BossDocUnlimited ? "checked=\"checked\"" : "";
                                                                                }
                                                                                <label><input type="checkbox" value="" @bossDocUnlimitedChecked>Бессрочный</label>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-3">
                                                                <div class="form-group">
                                                                    <label>Наличие номера *</label>
                                                                    <div class="input-group">
                                                                        @Html.DropDownList("IsHasBossDocNumber", (IEnumerable<SelectListItem>)(ViewBag.BoolValues), string.Empty,
                                                                           new
                                                                           {
                                                                               @class = "form-control edit-control main-control",
                                                                               @disabled = "disabled"
                                                                           })
                                                                        <span id="IsHasBossDocNumber" class="edit-control" style="display: none"></span>
                                                                        <span class="input-group-addon">
                                                                            <a class="obkcontractdialog" href="#">
                                                                                <i class="glyphicon glyphicon-info-sign"></i>
                                                                            </a>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-3">
                                                                <div class="form-group">
                                                                    <label>Номер документа</label>
                                                                    <div class="input-group">
                                                                        <input id="BossDocNumber" placeholder="Введите значение" class="form-control edit-control" type="text" name="BossDocNumber" disabled value="@Model.Contract.BossDocNumber">
                                                                        <span class="input-group-addon">
                                                                            <a class="obkcontractdialog" href="#">
                                                                                <i class="glyphicon glyphicon-info-sign"></i>
                                                                            </a>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-3">
                                                                <div class="form-group">
                                                                    <label>Дата начала действия *</label>
                                                                    <div class="input-group date">
                                                                        <input id="BossDocCreatedDate" class="form-control edit-control" placeholder="ДД.ММ.ГГГГ" disabled value="@(Model.Contract.BossDocCreatedDate != null ? @Model.Contract.BossDocCreatedDate.Value.ToString("dd.MM.yyyy") : "")">
                                                                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                                        <span class="input-group-addon">
                                                                            <a class="obkcontractdialog" href="#">
                                                                                <i class="glyphicon glyphicon-info-sign"></i>
                                                                            </a>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-3">
                                                                <div class="form-group">
                                                                    <label>Дата окончания действия *</label>
                                                                    <div class="input-group date">
                                                                        <input id="BossDocEndDate" class="form-control edit-control" placeholder="ДД.ММ.ГГГГ" disabled value="@(Model.Contract.BossDocEndDate != null ? @Model.Contract.BossDocEndDate.Value.ToString("dd.MM.yyyy") : "")">
                                                                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                                        <span class="input-group-addon">
                                                                            <a class="obkcontractdialog" href="#">
                                                                                <i class="glyphicon glyphicon-info-sign"></i>
                                                                            </a>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-12">
                                                                <h4>Банковские реквизиты</h4>
                                                            </div>
                                                            <div class="col-lg-3">
                                                                <div class="form-group">
                                                                    <label>ИИК (р/с) *</label>
                                                                    <div class="input-group">
                                                                        <input id="BankIik" placeholder="Введите значение" class="form-control edit-control" type="text" name="BankIik" disabled value="@Model.Contract.BankIik">
                                                                        <span class="input-group-addon">
                                                                            <a class="obkcontractdialog" href="#">
                                                                                <i class="glyphicon glyphicon-info-sign"></i>
                                                                            </a>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-3">
                                                                <div class="form-group">
                                                                    <label>БИК *</label>
                                                                    <div class="input-group">
                                                                        <input id="BankBik" placeholder="Введите значение" class="form-control edit-control" type="text" name="BankBik" disabled value="@Model.Contract.BankBik">
                                                                        <span class="input-group-addon">
                                                                            <a class="obkcontractdialog" href="#">
                                                                                <i class="glyphicon glyphicon-info-sign"></i>
                                                                            </a>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-lg-3">
                                                                <div class="form-group">
                                                                    <label>Валюта *</label>
                                                                    <div class="input-group">
                                                                        @Html.DropDownList("Currency", (IEnumerable<SelectListItem>)(ViewBag.Currencies),
                                                                    String.Empty,
                                                                    new
                                                                    {
                                                                        @class = "form-control edit-control main-control",
                                                                        @disabled = "disabled"
                                                                    })
                                                                        <span id="Currency" class="edit-control" style="display: none"></span>
                                                                        <span class="input-group-addon">
                                                                            <a class="obkcontractdialog" href="#">
                                                                                <i class="glyphicon glyphicon-info-sign"></i>
                                                                            </a>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div>
                                                                <div class="row">
                                                                    <div class="col-lg-6">
                                                                        <div class="form-group">
                                                                            <label>Наименование банка *</label>
                                                                            <div class="input-group">
                                                                                <input id="BankNameRu" placeholder="Введите значение" class="form-control edit-control" type="text" name="BankNameRu" disabled value="@Model.Contract.BankNameRu">
                                                                                <span class="input-group-addon">
                                                                                    <a class="obkcontractdialog" href="#">
                                                                                        <i class="glyphicon glyphicon-info-sign"></i>
                                                                                    </a>
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div>
                                                                <div class="row">
                                                                    <div class="col-lg-6">
                                                                        <div class="form-group">
                                                                            <label>Наименование банка на казахском языке *</label>
                                                                            <div class="input-group">
                                                                                <input id="BankNameKz" placeholder="Введите значение" class="form-control edit-control" type="text" name="BankNameKz" disabled value="@Model.Contract.BankNameKz">
                                                                                <span class="input-group-addon">
                                                                                    <a class="obkcontractdialog" href="#">
                                                                                        <i class="glyphicon glyphicon-info-sign"></i>
                                                                                    </a>
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="@("contractDataTab2" + ViewBag.UiId)" class="row hidden">
                            @Html.Partial("~/Views/SafetyAssessment/AttachFileView.cshtml", (IEnumerable<PW.Ncels.Database.Models.Common.FileGroup>)ViewBag.ListAttachments)
                        </div>
                         <div id="@("contractDataTab3" + ViewBag.UiId)" class="row hidden" style="height: 100%">
                             <div class="row" style="height: 99%">
                                 @(Html.Kendo().Grid<PW.Ncels.Database.DataModel.OBK_ContractHistoryView>()
                      .Name("contracHistoryGrid" + (string)ViewBag.UiId)
                      .Columns(columns =>
                      {
                          columns.Bound(p => p.StatusNameRu).Title("Статус").Width(100);
                          columns.Bound(p => p.EmployeeShortName).Title("Исполнитель").Width(150);
                          columns.Bound(p => p.UnitName).Title("Структурное подразделение").Width(150);
                          columns.Bound(p => p.Created).Format("{0:dd.MM.yyyy HH:mm}").Title("Дата действия").Width(100);
                      })
                    .Reorderable(reorderable => reorderable.Columns(true))
                    .Resizable(resizable => resizable.Columns(true))
                    .Sortable(sortable => sortable.AllowUnsort(false))
                    .Scrollable(scrollable => scrollable.Virtual(true))
                    .Filterable()
                    .Selectable(selectable => selectable.Mode(GridSelectionMode.Multiple))
                    .HtmlAttributes(new { @class = "pwGrid" })
                    .DataSource(dataSource => dataSource
                    .Ajax()
                    .Sort(sort => { sort.Add("Created").Ascending(); })
                    .PageSize(1000)
                    .Read(read => read.Action("ListHistory", "OBKContract", new { contractId = Model.ContractAddition.Id }))
                    ))
                             </div>
                         </div>
                    </div>
                    );
            }))

<div id="@("WindowContractRegistered" + ViewBag.UiId)" style="display: none">
    <div class="row">
        <div class="col-lg-12">
            <div class="form-group">
                Доп. соглашение от "@(ViewBag.declarant.NameRu)" зарегистрировано под номером "<span id="registeredNumber"></span>"
            </div>
        </div>
    </div>
    <div class="row">
        <div class="btn-toolbar" role="toolbar" style="margin-top: 20px">
            <div class="btn-group pull-right" role="group" style="margin-left: 10px">
                <button type="button" class="k-button k-primary" id="@("WindowContractRegisteredCancel" + ViewBag.UiId)">OK</button>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        InitObkContractAdditionCard('@ViewBag.UiId');
    });
</script>
